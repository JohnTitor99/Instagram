{% load static %}

<!-- GO TO POST -->
<div class="go-to-post-post-block">
    <div class="post-comments-body" style="border: 1px solid #D1D1D1;">
        <div class="go-to-post-image">
            <img id="postCommentsPostImageId" src=""/>
        </div>

        <!-- comments grid rows -->
        <div class="go-to-post">
            <div class="post-comment-header">
                <a class="postCommentsProfileLinkClass" href="">
                    <img class="postCommentsUserLogoClass" src=""/>
                    <b class="postCommentsUserNameClass" style="color: black;"></b>
                </a>
                <button id="postCommentsPostOptionsId" onclick="" class="dropbtn post-comment-options-dropbtn">•••</button>
                <hr>                                    
            </div>

            <div class="post-comment-display">
                <!-- user who created post and post text -->
                <div style="padding-bottom: 1px;">
                    <a class="postCommentsProfileLinkClass" href="">
                        <img class="postCommentsUserLogoClass" src=""/>
                    </a>
                    
                    <p class="post-comment-header-p">
                        <b class="postCommentsUserNameClass"></b>
                        <!-- post text -->
                        <div style="margin-left: 60px; margin-top: -20px; padding-bottom: 10px;">
                            <span id="postCommentsPostTextId"></span>
                        </div>
                        
                        <!-- hashtags -->
                        <div id="goToPostHashtagsBlockId" style="margin-left: 60px;"></div>

                        <br>
                        <small id="postCommentsHeaderPostCreatedId" style="margin-left: 60px;"></small>
                    </p>
                </div>
                
                <!-- the list of post's comments -->
                <div id="goToPostCommentId"></div>
                <!-- comments replies -->
                
            </div>

            <!-- post actions -->
            <div class="post-comments-actions-and-form">

                <!-- html is passing from javascript -->
                <div id="goToPostPostActionsId"></div>


                <!-- total likes -->
                <p>
                    <a href="" id="postCommentsLikesDropdownId" class="dropbtn" style="text-decoration: none; color: black;">
                        <b style="margin-top: -10px; margin-left: 10px;" id="postCommentsLikesCountId"></b>
                    </a>
                </p>

                <p style="margin-left: 10px;" id="postCommentsCreatedId"></p>

                <!-- form for adding comments -->
                <div class="_aaof post-comments-text-form-block">
                    <hr>
                    <form class="_aidk" method="POST" name="add-comment-form">
                        {% csrf_token %}
                        <div class="x1y1aw1k xn6708d xwib8y2 xkhd6sd">
                            <div>
                                <button class="_abl- _abm2" type="button">
                                    <div class="_abm0">
                                        <svg aria-label="Emoji" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24">
                                            <path d="M15.83 10.997a1.167 1.167 0 1 0 1.167 1.167 1.167 1.167 0 0 0-1.167-1.167Zm-6.5 1.167a1.167 1.167 0 1 0-1.166 1.167 1.167 1.167 0 0 0 1.166-1.167Zm5.163 3.24a3.406 3.406 0 0 1-4.982.007 1 1 0 1 0-1.557 1.256 5.397 5.397 0 0 0 8.09 0 1 1 0 0 0-1.55-1.263ZM12 .503a11.5 11.5 0 1 0 11.5 11.5A11.513 11.513 0 0 0 12 .503Zm0 21a9.5 9.5 0 1 1 9.5-9.5 9.51 9.51 0 0 1-9.5 9.5Z">

                                            </path>
                                        </svg>
                                    </div>
                                </button>
                            </div>
                        </div>
                        <input type="text" id="" maxlength="85" class="postCommentsTextFieldClass post-comment-textarea" placeholder="Add a comment..." name="comment-text"/>
                        <input type="hidden" name="post-id" value="">
                        <input type="hidden" id="" name="comment-id" value=""/>
                        <div class="">
                            <input type="submit" class="post-add-comment-btn post-comments-add-comment-btn x1i10hfl x1qjc9v5 xdl72j9 x2lah0s xe8uvvx xdj266r x11i5rnm xat24cr x1mh8g0r x2lwn1j xeuugli x1hl2dhg xggy1nq x1ja2u2z x1t137rt x1q0g3np x1lku1pv x1a2a7pz xjyslct x9f619 x1ypdohk x1i0vuye xwhw2v2 x17ydfre xl56j7k x1f6kntn x2b8uid xlyipyv x87ps6o x14atkfc x1lcm9me x1yr5g0i xrt01vj x10y3i5r x1d5wrs8 x1v8p93f xogb00i x16stqrj x1ftr3km x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi x972fbf xcfux6l x1qhh985 xm0m39n xt0psk2 xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6 xjbqb8w xt7dq6l x173jzuc" value="Post" name="add-comment-form"/>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- hidden post actions buttons for inserting in post comments -->
<div hidden>
    {% if posts %}
        {% for post in posts %}
            <!-- like button -->
            <label style="cursor: pointer;" id="likeLabelId{{ post.id }}">
                {% if request.user.id in post.users_likes %}
                    <input type="button" class="_abl-" id="unLikeBtnId{{ post.id }}">
                    <svg
                        aria-label="Unlike"
                        class="_ab6-"
                        color="#ed4956"
                        fill="#ed4956"
                        height="24"
                        role="img"
                        viewBox="0 0 48 48"
                        width="24">
                        <path
                            d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z">
                        </path>
                    </svg>
                {% else %}
                    <input type="button" class="_abl-" id="likeBtnId{{ post.id }}"/>
                    <svg
                        aria-label="Like"
                        class="_ab6-"
                        color="#262626"
                        fill="#262626"
                        height="24"
                        role="img"
                        viewBox="0 0 24 24"
                        width="24">
                        <path
                            d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z">
                        </path>
                    </svg>
                {% endif %}
            </label>
            <!-- like ajax (send post request without page refresh and make like btn red) -->
            <script type="text/javascript">
                $(document).on('click','#likeBtnId{{ post.id }}', function(e) {
                    e.preventDefault();

                    // make like button red
                    $("#likeLabelId{{ post.id }}").empty();
                    let temp = '<input type="button" class="_abl-" id="unLikeBtnId{{ post.id }}"/><svg aria-label="Unlike" class="_ab6-" color="#ed4956" fill="#ed4956" height="24" role="img" viewBox="0 0 48 48" width="24"><path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path></svg>'
                    $("#likeLabelId{{ post.id }}").append(temp);

                    // make like button red in post comments
                    $("#postCommentsLikeLabelId{{ post.id }}").empty();
                    let temp1 = '<input type="button" class="_abl-" id="unLikeBtnId{{ post.id }}"/><svg aria-label="Unlike" class="_ab6-" color="#ed4956" fill="#ed4956" height="24" role="img" viewBox="0 0 48 48" width="24"><path d="M34.6 3.1c-4.5 0-7.9 1.8-10.6 5.6-2.7-3.7-6.1-5.5-10.6-5.5C6 3.1 0 9.6 0 17.6c0 7.3 5.4 12 10.6 16.5.6.5 1.3 1.1 1.9 1.7l2.3 2c4.4 3.9 6.6 5.9 7.6 6.5.5.3 1.1.5 1.6.5s1.1-.2 1.6-.5c1-.6 2.8-2.2 7.8-6.8l2-1.8c.7-.6 1.3-1.2 2-1.7C42.7 29.6 48 25 48 17.6c0-8-6-14.5-13.4-14.5z"></path></svg>'
                    $("#postCommentsLikeLabelId{{ post.id }}").append(temp1);

                    $.ajax({
                        type:'POST',
                        url:`/post-action/{{ post.id }}/`,
                        data:
                        {
                            actionbtn: 'like',
                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                        },
                    })
                });
            </script>
            <!-- unlike ajax (send post request without page refresh and make like btn unpressed) -->
            <script type="text/javascript">
                $(document).on('click','#unLikeBtnId{{ post.id }}', function(e) {
                    e.preventDefault();

                    // make like button white
                    $("#likeLabelId{{ post.id }}").empty();
                    let temp = '<input type="button" class="_abl-" id="likeBtnId{{ post.id }}"/><svg aria-label="Like" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path></svg>'
                    $("#likeLabelId{{ post.id }}").append(temp);

                    // make like button white in post comments
                    $("#postCommentsLikeLabelId{{ post.id }}").empty();
                    let temp1 = '<input type="button" class="_abl-" id="likeBtnId{{ post.id }}"/><svg aria-label="Like" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path></svg>'
                    $("#postCommentsLikeLabelId{{ post.id }}").append(temp1);

                    $.ajax({
                        type:'POST',
                        url:`/post-action/{{ post.id }}/`,
                        data:
                        {
                            actionbtn: 'unlike',
                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                        },
                    })
                });
            </script>
            
            <!-- save button -->
            <label style="cursor: pointer;" id="saveLabelId{{ post.id }}">
                {% if post.id in saved_posts %}
                    <input type="button" class="dropbtn _abl-" id="unSaveBtnId{{ post.id }}">
                    <svg
                        aria-label="Remove"
                        class="_ab6-"
                        color="#262626"
                        fill="#262626"
                        height="24"
                        role="img"
                        viewBox="0 0 24 24"
                        width="24">
                        <path d="M20 22a.999.999 0 0 1-.687-.273L12 14.815l-7.313 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"></path>
                    </svg>
                {% else %}
                    <input type="button" class="dropbtn _abl-" id="saveBtnId{{ post.id }}">
                    <svg aria-label="Save"
                    class="_ab6-"
                    color="#262626"
                    fill="#262626"
                    height="24"
                    role="img"
                    viewBox="0 0 24 24"
                    width="24">
                    <polygon
                        fill="none"
                        points="20 21 12 13.44 4 21 4 3 20 3 20 21"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2">
                    </polygon>
                    </svg>
                {% endif %}
            </label>
            <!-- save ajax -->
            <script type="text/javascript">
                $(document).on('click','#unSaveBtnId{{ post.id }}', function(e) {
                    e.preventDefault();

                    // make like button red
                    $("#saveLabelId{{ post.id }}").empty();
                    let temp = '<input type="button" class="dropbtn _abl-" id="saveBtnId{{ post.id }}"><svg aria-label="Save" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><polygon fill="none" points="20 21 12 13.44 4 21 4 3 20 3 20 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></svg>'
                    $("#saveLabelId{{ post.id }}").append(temp);

                    // make like button red in post comments
                    $("#postCommentsSaveLabelId{{ post.id }}").empty();
                    let temp1 = '<input type="button" class="dropbtn _abl-" id="saveBtnId{{ post.id }}"><svg aria-label="Save" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><polygon fill="none" points="20 21 12 13.44 4 21 4 3 20 3 20 21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></polygon></svg>'
                    $("#postCommentsSaveLabelId{{ post.id }}").append(temp1);

                    $.ajax({
                        type:'POST',
                        url:`/post-action/{{ post.id }}/`,
                        data:
                        {
                            actionbtn: 'save',
                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                        },
                    })
                });
            </script>
            <!-- unsave ajax -->
            <script type="text/javascript">
                $(document).on('click','#saveBtnId{{ post.id }}', function(e) {
                    e.preventDefault();

                    // make like button red
                    $("#saveLabelId{{ post.id }}").empty();
                    let temp = '<input type="button" class="dropbtn _abl-" id="unSaveBtnId{{ post.id }}"><svg aria-label="Remove" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><path d="M20 22a.999.999 0 0 1-.687-.273L12 14.815l-7.313 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"></path></svg>'
                    $("#saveLabelId{{ post.id }}").append(temp);

                    // make like button red in post comments
                    $("#postCommentsSaveLabelId{{ post.id }}").empty();
                    let temp1 = '<input type="button" class="dropbtn _abl-" id="unSaveBtnId{{ post.id }}"><svg aria-label="Remove" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24"><path d="M20 22a.999.999 0 0 1-.687-.273L12 14.815l-7.313 6.912A1 1 0 0 1 3 21V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1Z"></path></svg>'
                    $("#postCommentsSaveLabelId{{ post.id }}").append(temp1);

                    $.ajax({
                        type:'POST',
                        url:`/post-action/{{ post.id }}/`,
                        data:
                        {
                            actionbtn: 'save',
                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val()
                        },
                    })
                });
            </script>
        {% endfor %}
    {% endif %}
</div>


<!-- js -->
<script type="text/javascript">
    // set all post data
    function goToPostFunc(postId, postImage, postUser, postUserId, postUserLogo, postText) {
        // set post image
        document.getElementById("postCommentsPostImageId").setAttribute('src', postImage);

        // set post comment form
        document.getElementsByName("post-id")[0].value = postId;

        // set hashtags
        let change_quotes_hashtags = hashtagsJson.replaceAll("'", '"');
        let array_of_hashtags = JSON.parse(change_quotes_hashtags);
        for (let i = 0; i < array_of_hashtags.length; i++) {
            if (array_of_hashtags[i][postId] != undefined) {
                for (let n = 0; n < array_of_hashtags[i][postId].length; n++) {
                    hashtag = `
                        <a href="/explore/tags/${ array_of_hashtags[i][postId][n] }/">#${ array_of_hashtags[i][postId][n] }</a>`;
                    document.getElementById("goToPostHashtagsBlockId").insertAdjacentHTML('afterbegin', hashtag);
                }
            }
        }

        document.getElementById("postCommentsLikesDropdownId").setAttribute('href', `javascript: usersWhoLikedPostFunc(${ postId })`);
        document.getElementsByClassName("postCommentsTextFieldClass")[0].setAttribute('id', 'addCommentInputId' + postId);
        

        if (document.getElementsByName("comment-id")[0].value == "") {
            document.getElementsByName("comment-id")[0].setAttribute('id', 'commentId' + postId);
        } else {
            document.getElementById("addCommentInputId" + postId).value = "";
        }
        // set username, logos, links
        let postCommentsProfileLinks = document.getElementsByClassName("postCommentsProfileLinkClass");
        let postCommentsUserNames = document.getElementsByClassName("postCommentsUserNameClass");
        let postCommentsUserLogos = document.getElementsByClassName("postCommentsUserLogoClass");

        for (let i = 0; i < postCommentsProfileLinks.length; i++) {
            postCommentsUserNames[i].textContent = postUser;
            postCommentsProfileLinks[i].setAttribute('href', `/${postUser}/`);
            postCommentsUserLogos[i].setAttribute('src', postUserLogo);
        }

        // post text
        if (postText != 'None') {
            document.getElementById("postCommentsPostTextId").innerHTML = "";
            document.getElementById("postCommentsPostTextId").innerHTML += postText;
        }

        // set post options buttons
        if (request_user == postUser) {
            document.getElementById("postCommentsPostOptionsId").setAttribute('onclick', `myPostOptionsDropdownFunc('${ postId }', '${ postImage }', '${ postText }')`);
        } else {
            document.getElementById("postCommentsPostOptionsId").setAttribute('onclick', `goToPostOptionsDropdownFunc(${ postId })`);
        }

        // insert comments
        let change_quotes_comments = comments_json.replaceAll("'", '"');
        let array_of_comments = JSON.parse(change_quotes_comments);

        if (document.getElementById("goToPostCommentId").innerHTML == "") {
            for (let i = 0; i < array_of_comments.length; i++) {
                let obj = array_of_comments[i]
                // insert comment block
                if (String(obj['fields']['post']) == postId) {
                    let commentBlock = `
                    <div style="height: 100%; width: 100%;">
                        <a href="/${ obj['adj_dict']['username'] }/">
                            <img src="/${ obj['adj_dict']['logo'] }"/>
                        </a>
                        <p class="post-comment-body-p"><b>${ obj['adj_dict']['username'] }</b> ${ obj['fields']['body'] }</p>

                        <!-- comment created date, reply and options buttons -->
                        <div class="comment-created-replies">
                            <small>${ obj['adj_dict']['created'] }
                                <input type="button" onclick="commentReplyFunc('${ postId }', '${ obj['adj_dict']['username'] }', '${ obj['pk'] }')" value="Reply"/>
                                <input type="button" onclick="commentOptionsFunc('${ obj['pk'] }')" value="•••"/>
                            </small>
                        </div>

                        <!-- comments options dropdown-->
                        <div class="dropdown">
                            <div id="commentOptionsDropdown${ obj['pk'] }" class="dropdown-content hide">
                                <div onclick="hidePopupFunc()" class="x1ey2m1c xds687c xixxii4 x17qophe x13vifvy x1h0vfkc"></div>
                                <div class="comment-options-dropdown-content">
                                    <!-- delete button is only for my comments -->
                                    ${ obj['fields']['user'] == request_user_id ? `<a href="/delete-comment/${ obj['pk'] }/"><b style="color: red;">Delete</b></a><hr></hr>`:''}
                                    <a href="javascript:hidePopupFunc()">Cancel</a>
                                </div>
                            </div>
                        </div>

                        <div id="replyBlockId${ obj['pk'] }" class="reply-block"></div>
                    </div>`
                    document.getElementById("goToPostCommentId").insertAdjacentHTML('beforeend', commentBlock);

                    // insert replies if they are
                    if (obj['replies'].length > 0) {
                        let hideShowRepliesBtn = `<input type="button" id="viewHideRepliesBtnId${ obj['pk'] }" onclick="viewHideRepliesFunc(${ obj['pk'] }, ${ obj['replies'].length })"
                        class="view-hide-replies" value="----- View replies (${ obj['replies'].length })"/>
                        `
                        document.getElementById(`replyBlockId${ obj['pk'] }`).insertAdjacentHTML('beforebegin', hideShowRepliesBtn);
                        for (let i = 0; i < obj['replies'].length; i++) {
                            let repliesBlock = `
                            <div>
                                <a href="/${ obj['replies'][i]['username'] }/">
                                    <img src="/${ obj['replies'][i]['logo'] }"/>
                                </a>
                                <p class="post-comment-body-p">
                                    <b>${ obj['replies'][i]['username'] }</b> @${ obj['replies'][i]['related_username'] } ${ obj['replies'][i]['body'] }
                                </p>

                                <!-- reply created date, reply and options buttons -->
                                <div class="comment-created-replies">
                                    <small>${ obj['replies'][i]['created'] }
                                        <input type="button" onclick="commentReplyFunc('${ postId }', '${ obj['replies'][i]['username'] }', '${ obj['pk'] }')" value="Reply"/>
                                        <input type="button" onclick="replyOptionsFunc('${ obj['replies'][i]['pk'] }')" value="•••"/>
                                    </small>
                                </div>
                                
                                <!-- REPLY OPTIONS DROPDOWN-->
                                <div class="dropdown">
                                    <div id="replyOptionsDropdown${ obj['replies'][i]['pk'] }" class="dropdown-content hide">
                                    <div id="replyOptionsDropdownDarkBackgroundId" class="x1ey2m1c xds687c xixxii4 x17qophe x13vifvy x1h0vfkc"></div>
                                        <div class="reply-options-dropdown-content">
                                            ${ obj['replies'][i]['user'] == request_user_id ? `<a href="/delete-reply/${ obj['replies'][i]['pk'] }/"><b style="color: red;">Delete</b></a><hr></hr>`: ''}
                                            <a href="javascript:hidePopupFunc()">Cancel</a>
                                        </div>
                                    </div>
                                </div>
                            </div>`
                            let replyBlockHTML = document.getElementById(`replyBlockId${ obj['pk'] }`).innerHTML;
                            document.getElementById(`replyBlockId${ obj['pk'] }`).innerHTML = replyBlockHTML + repliesBlock;
                        }
                    }
                }
            }
        }

        // parse json posts_data
        let posts_data_json = JSON.parse(posts_data.replaceAll("'", '"'));

        // post created
        document.getElementById("postCommentsHeaderPostCreatedId").innerHTML = posts_data_json[postId]['created'];

        // setting actions block
        if (document.getElementById("goToPostPostActionsId").innerHTML == "") {

            document.getElementById("postCommentsLikesCountId").innerHTML = "";
            document.getElementById("postCommentsLikesCountId").innerHTML += posts_data_json[postId]['total_likes'] + " likes";
            
            document.getElementById("postCommentsLikesDropdownId").setAttribute('href', '');
            document.getElementById("postCommentsLikesDropdownId").setAttribute('href', `javascript: usersWhoLikedPostFunc('${ postId }')`);


            document.getElementById("postCommentsCreatedId").innerHTML = "";
            document.getElementById("postCommentsCreatedId").innerHTML += posts_data_json[postId]['created'];

            let likeBtnForPostComments = document.getElementById(`likeLabelId${ postId }`).innerHTML;
            let saveBtnForPostComments = document.getElementById(`saveLabelId${ postId }`).innerHTML;

            let actionsBlock = `
            <div>
                <hr>

                <section class="_aamu _ae3_ _ae40 _ae41 _ae48">
                    <!-- like button -->
                    <span class="_aamw">
                    <label style="cursor: pointer;" id="postCommentsLikeLabelId${ postId }">
                        ${ likeBtnForPostComments }
                    </label>
                </span>

                    <!-- comments button -->
                    <span>
                        <label style="cursor: pointer;">
                            <input type="button" class="dropbtn _abl-" onclick="">
                            <svg aria-label="Comment" class="_ab6-" color="#262626" height="24" role="img" viewBox="0 0 24 24" width="24">
                                <path d="M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2">
                                </path>
                            </svg>
                        </label>
                    </span>

                    <!-- share button -->
                    <span class="_aamy">
                        <label style="cursor: pointer;">
                            <input type="button" class="_abl-" onclick="">
                            <svg aria-label="Share Post" class="_ab6-" color="#262626" fill="#262626" height="24" role="img" viewBox="0 0 24 24" width="24">
                            <line fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2" x1="22" x2="9.218" y1="3" y2="10.083">
                            </line>
                            <polygon fill="none" points="11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334" stroke="currentColor" stroke-linejoin="round" stroke-width="2">
                            </polygon>
                            </svg>
                        </label>
                    </span>

                    <!-- save button -->
                    <span class="_aamz">
                        <label style="cursor: pointer;" id="postCommentsSaveLabelId${ postId }">
                            ${ saveBtnForPostComments }
                        </label>
                    </span>
                </section>


            </div>`
            document.getElementById("goToPostPostActionsId").insertAdjacentHTML('afterbegin', actionsBlock);
        }
    }

    // call the function above
    goToPostFunc("{{ post.id }}",
                "{{ post.image.url }}",
                "{{ post.user.username }}",
                "{{ post.user.id }}",
                "{{ post.user.userprofile.logo.url }}",
                "{{ post.post_text }}");
</script>





<br>
<hr class="go-to-post-hr">
<br>




<div class="go-to-post-posts">
    <b>More posts from <a href="{% url 'user_profile' post_user %}">{{ post_user }}</a></b>
    <div class="go-to-post-grid">
        {% for post in posts %}

            <a href="{% url 'user_profile' post.user.username %}"><img class="go-to-post-post-img" src="{{ post.image.url }}"/></a>

        {% endfor %}
    </div>
</div>
